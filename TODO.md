## todo-client

- создать маршрутизацию
  - npm install react-router-dom
- создать компоненты для главной страницы - частично

- создать компоненты для страницы карты

  - боковая панель+
  - хедер +
    - форма поиска - создана, надо прописать логику
  - непосредственно карта +
  - блок с кнопками со слоями - надо создать+

- создать компоненты для страницы сравнения

  - создать непосредственно страницу сравнения - почти готово, надо набить контентом
  - слайдер для айтемов сравнения
    - компонент айтема для сравнения
      - изображение
      - блок с характеристиками района
    - убрать из сравнения

- создать компоненты для админки
  - блок района
    - выбор района
    - выбор слоя для редактирования
    - инпуты для ввода объектов на слой
    - вычисление баллов для слоя
    - кнопка сохранения в бд
    - кнопка редактирования района
    - кнопка очистки статистики для района или для слоя района
  - форма авторизации
    - логин
    - пароль

### 2025-11-24

- не грузить весь массив экологических данных сразу (по возможности), грузить для подробного описания района полный массив по отношению к нему, а для простого анализа - просто количество парков и количество опасных объектов.
- при нажатии на слой экология районы окрашиваются исходя из количества опасных объектов по отношению к парковым территориям. Справа - шкала оценки, градиент от зеленого до красного.
- сделать шкалу оценки универсальным компонентом, который бы мог считать все показатели которые нужны, но внутри компонента дергаем чистые функции, каждая для расчета своих показателей

```js
const calculateBar(type, a, b) => {
  switch(type) {
    case 'ecology':
      calculateEcologyRate(a, b);
    break;
    case 'transport':
      calculateTransport(a, b);
    break;
    default:
      calculateSmth();
    break;
  }
}
```

- надо оптимизировать карту. Для этого идея - не показывать сразу все объекты на всех территориях, а показывать только те, которые при клике на район. А при клике на другой район чистить остальные районы от изображений.
- как второй вариант - показывать количество объектов на боковой панели при выборе района и по клику на категорию объектов их отображать
- прописать методики расчета данных по экологии, шуму и транспорту на отдельной странице, чтобы пользователю было понятно, что и как считается.

## todo-server

- сделать модели для баз данных
  - слой +
  - объект +
  - категория +
  - рейтинг района
  - пользователь
- сделать контроллеры для работы с моделью - они называются views в django

  - CRUD для каждой из модели +
    - поиск одной сущности по id +
    - поиск всех сущностей +
    - создание +
    - апдейт по id +
    - удаление по id +

- какой будет механизм авторизации на сервак.
  Посмотреть, есть ли возможность в django сделать jwt
  Посмотреть, как создавать на сервере и отдавать на клиент Auth key
  Посмотреть как создавать и отдавать refresh key

1. Формируется jwt на клиенте и отправляется на сервак при авторизации
2. Сервак отдает auth key, используем его в запросах в заголовке Authorization пока не протухнет
3. Когда auth key протух, формируем refresh key и используем его
4. Надо сделать механизм авторизации с заданным временем протухания auth key и формирования refresh key

- проверить в /mapapi/urls.py, а все ли адреса для всех сущностей и для их crud учтены.
- создать через chatGpt базу sqlite с возможностью работы в postgres
- написать базовый минимум тестов для crud в каждой сущности в папке smoke_test_api/tests с учетом уже сделанной ранее авторизации

## todo-db

- продумать структуру таблиц и связи между ними
  - таблица слой-район-рейтинг
    - район
    - слой
    - рейтинг
  - таблица объектов
    - наименование объекта
    - категория объекта
    - адрес объекта
    - район где объект находится
    - широта
    - долгота
  - таблица категорий
    - id категории
    - наименование категории
    - slug категории
  - таблица слоев
    - id
    - slug
    - название
  - таблица пользователей
    - id
    - login
    - password
    - auth_key
    - refresh_key

## TODO - Паша

- починить контекст для передачи карт в сравнение
- наладить передачу значений для поиска района в карту
